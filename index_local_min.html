<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>three minimal diag</title>
<style>
  html,body{margin:0;height:100%}
  canvas{position:fixed;inset:0;width:100vw;height:100vh;display:block}
  #diag{position:fixed;right:10px;top:10px;z-index:10;background:#000c;color:#0f0;
        font:12px/1.4 monospace;padding:8px 10px;border-radius:8px;max-width:42ch;white-space:pre-wrap}
</style>
</head><body>
<div id="diag">loading…</div>
<canvas id="c"></canvas>

<!-- ローカル同梱 three.js（同じリポジトリ内） -->
<script src="./vendor/three/three.min.js"></script>
<script>
const log = (m)=>document.getElementById('diag').textContent += "\n" + m;
document.getElementById('diag').textContent = "diag start";

// 1) three.js 読めてる？
if (typeof THREE === 'undefined') {
  log("NG: window.THREE undefined → /vendor/three/three.min.js が見つからない/読めない");
  log("確認: このURLを直接開ける？ → " + location.origin + location.pathname.replace(/index_local_min\.html$/, "vendor/three/three.min.js"));
} else {
  log("OK: THREE loaded");
  try {
    const canvas = document.getElementById('c');
    const r = new THREE.WebGLRenderer({canvas, antialias:true});
    if (r.outputColorSpace !== undefined) r.outputColorSpace = THREE.SRGBColorSpace;
    log("OK: WebGLRenderer created");

    const s = new THREE.Scene(); s.background = new THREE.Color(0x141414);
    const c = new THREE.PerspectiveCamera(45, 2, 0.1, 100); c.position.set(0,0,3);
    s.add(new THREE.HemisphereLight(0xffffff,0x223,1));

    const mesh = new THREE.Mesh(
      new THREE.BoxGeometry(1,1,1),
      new THREE.MeshStandardMaterial({color:0x66aaff, roughness:.6, metalness:.1})
    );
    s.add(mesh);

    function resize(){
      const w = canvas.clientWidth, h = canvas.clientHeight;
      if (canvas.width!==w || canvas.height!==h) {
        r.setSize(w,h,false); c.aspect = w/h; c.updateProjectionMatrix();
      }
    }
    function loop(t){
      resize();
      mesh.rotation.y = t*0.0015;
      r.render(s,c);
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);
    log("OK: render loop started");
  } catch (e) {
    log("NG: WebGLRenderer 作成/描画で例外 → " + e.message);
    log("Chrome/Edge の『ハードウェア アクセラレーション』をONにして再起動、または別ブラウザで試す");
  }
}
</script>
</body></html>
