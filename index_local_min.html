<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>three minimal diag</title>
<style>
  html,body{margin:0;height:100%}
  canvas{position:fixed;inset:0;width:100vw;height:100vh;display:block}
  #diag{position:fixed;right:10px;top:10px;z-index:10;background:#000c;color:#0f0;
        font:12px/1.4 monospace;padding:8px 10px;border-radius:8px;max-width:42ch;white-space:pre-wrap}
</style>
</head><body>
<div id="diag">diag start</div>
<canvas id="c"></canvas>

<script>
const diag = (m)=>document.getElementById('diag').textContent += "\n"+m;
function loadOne(cands, done){
  if(!cands.length){ diag("ERROR: all cdns failed"); return; }
  const src=cands.shift(); diag("try: "+src);
  const s=document.createElement('script');
  s.src=src; s.onload=()=>{diag("loaded: "+src); done&&done();};
  s.onerror=()=>{diag("fail : "+src); s.remove(); loadOne(cands,done);};
  document.head.appendChild(s);
}

const threeC = [
  "./assets/threejs/three.min.js",
  "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.min.js",
  "https://unpkg.com/three@0.161.0/build/three.min.js",
  "https://rawcdn.githack.com/mrdoob/three.js/r161/build/three.min.js"
];
const gltfC = [
  "./assets/threejs/GLTFLoader.js",
  "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/js/loaders/GLTFLoader.js",
  "https://unpkg.com/three@0.161.0/examples/js/loaders/GLTFLoader.js",
  "https://rawcdn.githack.com/mrdoob/three.js/r161/examples/js/loaders/GLTFLoader.js"
];
const orbitC = [
  "./assets/threejs/OrbitControls.js",
  "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/js/controls/OrbitControls.js",
  "https://unpkg.com/three@0.161.0/examples/js/controls/OrbitControls.js",
  "https://rawcdn.githack.com/mrdoob/three.js/r161/examples/js/controls/OrbitControls.js"
];

loadOne(threeC.slice(), ()=>{
  if(typeof THREE==='undefined'){ diag("NG: THREE undefined after load"); return; }
  loadOne(gltfC.slice(), ()=> loadOne(orbitC.slice(), start));
});

function start(){
  diag("OK: libs ready");
  const canvas=document.getElementById('c');
  const r=new THREE.WebGLRenderer({canvas,antialias:true});
  if (r.outputColorSpace!==undefined) r.outputColorSpace=THREE.SRGBColorSpace;
  const s=new THREE.Scene(); s.background=new THREE.Color(0x141414);
  const c=new THREE.PerspectiveCamera(45,2,0.1,100); c.position.set(0,0,3);
  s.add(new THREE.HemisphereLight(0xffffff,0x223,1));
  const mesh=new THREE.Mesh(new THREE.BoxGeometry(1,1,1),
              new THREE.MeshStandardMaterial({color:0x66aaff,roughness:.6,metalness:.1}));
  s.add(mesh);
  function resize(){ const w=canvas.clientWidth,h=canvas.clientHeight;
    if(canvas.width!==w||canvas.height!==h){ r.setSize(w,h,false); c.aspect=w/h; c.updateProjectionMatrix(); }
  }
  function loop(t){ resize(); mesh.rotation.y=t*0.0015; r.render(s,c); requestAnimationFrame(loop); }
  requestAnimationFrame(loop); diag("OK: render loop started");
}
</script>
</body></html>
